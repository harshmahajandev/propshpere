<div class="invoices-container">
      
      <div class="page-header">
        <div class="header-left">
          <h1><mat-icon>receipt_long</mat-icon> Invoices</h1>
          <p>Track and manage all invoices</p>
        </div>
        <button mat-raised-button color="primary" (click)="addInvoice()" class="add-btn">
          <mat-icon>add</mat-icon>
          Create Invoice
        </button>
      </div>

      <mat-card class="filters-card">
        <div class="filters-container">
          <mat-form-field appearance="outline" class="search-field">
            <mat-label>Search invoices</mat-label>
            <input matInput [(ngModel)]="searchQuery" placeholder="Invoice number or customer">
            <mat-icon matPrefix>search</mat-icon>
          </mat-form-field>

          <mat-form-field appearance="outline" class="filter-field">
            <mat-label>Filter by status</mat-label>
            <mat-select [(ngModel)]="filterStatus">
              <mat-option value="all">All Statuses</mat-option>
              <mat-option value="Draft">Draft</mat-option>
              <mat-option value="Sent">Sent</mat-option>
              <mat-option value="Paid">Paid</mat-option>
              <mat-option value="Overdue">Overdue</mat-option>
              <mat-option value="Cancelled">Cancelled</mat-option>
            </mat-select>
          </mat-form-field>
        </div>
      </mat-card>

      <div *ngIf="loading" class="loading-container">
        <mat-spinner></mat-spinner>
        <p>Loading invoices...</p>
      </div>

      <mat-card *ngIf="errorMessage && !loading" class="error-card">
        <mat-icon>error_outline</mat-icon>
        <div>
          <h3>Error</h3>
          <p>{{ errorMessage }}</p>
        </div>
      </mat-card>

      <mat-card *ngIf="!loading && filteredInvoices.length === 0 && !errorMessage" class="empty-state">
        <mat-icon>receipt</mat-icon>
        <h3>No Invoices Found</h3>
        <p *ngIf="searchQuery || filterStatus !== 'all'">Try adjusting your search or filters</p>
        <p *ngIf="!searchQuery && filterStatus === 'all'">Create your first invoice to get started</p>
        <button mat-raised-button color="primary" (click)="addInvoice()">
          <mat-icon>add</mat-icon>
          Create First Invoice
        </button>
      </mat-card>

      <div *ngIf="!loading && filteredInvoices.length > 0" class="invoices-list">
        <mat-card *ngFor="let invoice of filteredInvoices" class="invoice-card">
          <div class="invoice-header">
            <div class="invoice-number">
              <mat-icon>receipt</mat-icon>
              <span>{{ invoice.invoiceNumber }}</span>
            </div>
            <mat-chip [class]="'status-chip status-' + invoice.status.toLowerCase()">
              {{ invoice.status }}
            </mat-chip>
          </div>

          <div class="invoice-body">
            <div class="invoice-info">
              <div class="info-row">
                <mat-icon>person</mat-icon>
                <div>
                  <span class="label">Customer</span>
                  <span class="value">{{ invoice.customerName || 'Unknown' }}</span>
                </div>
              </div>
              <div class="info-row">
                <mat-icon>calendar_today</mat-icon>
                <div>
                  <span class="label">Invoice Date</span>
                  <span class="value">{{ invoice.invoiceDate | date }}</span>
                </div>
              </div>
              <div class="info-row" *ngIf="invoice.dueDate">
                <mat-icon>event</mat-icon>
                <div>
                  <span class="label">Due Date</span>
                  <span class="value">{{ invoice.dueDate | date }}</span>
                </div>
              </div>
            </div>

            <div class="invoice-amounts">
              <div class="amount-row">
                <span>Amount:</span>
                <span>${{ invoice.amount | number:'1.2-2' }}</span>
              </div>
              <div class="amount-row">
                <span>Tax:</span>
                <span>${{ invoice.taxAmount | number:'1.2-2' }}</span>
              </div>
              <div class="amount-row total">
                <span>Total:</span>
                <span>${{ invoice.totalAmount | number:'1.2-2' }}</span>
              </div>
            </div>
          </div>

          <mat-card-actions>
            <button mat-button color="primary" (click)="editInvoice(invoice)">
              <mat-icon>edit</mat-icon>
              Edit
            </button>
            <button mat-button (click)="deleteInvoice(invoice)">
              <mat-icon>delete</mat-icon>
              Delete
            </button>
          </mat-card-actions>
        </mat-card>
      </div>

</div>
